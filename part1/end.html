<html>
<head>
    <title>A-Frame / WebXR / AR / Hit Test</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    <script>window.debug = true;</script>
    <script src="https://rawgit.com/blairmacintyre/aframe-xr/master/vendor/aframe-v0.7.1.js"></script>
    <script src="https://rawgit.com/arturitu/aframe-xr/master/dist/aframe-xr.js"></script>
    <script src="https://rawgit.com/arturitu/aframe-xr/master/examples/lib/hit-test.js"></script>
    <!--<script src="../resources/hit-test.js"></script>-->
</head>
<body>
<a-scene hit-test>
    <a-light type="ambient" color="#445451"></a-light>
    <a-entity light="type:directional; castShadow:true; intensity:0.4" position="-10 10 4"></a-entity>
    <a-box id='obj'
           position="0 0 0"
           rotation="0 0 0"
           width="0.2"
           height="0.2"
           depth="0.2"
           color="red"
           shadow="cast:true"></a-box>
    <!--<a-plane id="plane" position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow="receive:true"></a-plane>-->
</a-scene>
<script>
    const scene = AFRAME.scenes[0]

    scene.addEventListener('newAnchoredEntity', (e) => {
        const floor = e.detail
        const obj = document.querySelector('#obj')
        scene.removeChild(obj)
        floor.appendChild(obj)
        scene.appendChild(floor)
        scene.removeAttribute('hit-test')
    });
</script>
</body>
</html>